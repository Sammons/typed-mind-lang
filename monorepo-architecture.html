<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TypedMind Architecture Viewer</title>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0d1117;
            color: #c9d1d9;
            overflow: hidden;
        }
        
        #container {
            display: flex;
            height: 100vh;
        }
        
        #sidebar {
            width: 300px;
            background: #161b22;
            border-right: 1px solid #30363d;
            overflow-y: auto;
            padding: 16px;
        }
        
        #canvas {
            flex: 1;
            position: relative;
            overflow: hidden;
        }
        
        .entity-list {
            margin-top: 16px;
        }
        
        .entity-group {
            margin-bottom: 24px;
        }
        
        .entity-group h3 {
            color: #58a6ff;
            font-size: 14px;
            text-transform: uppercase;
            margin: 0 0 8px 0;
        }
        
        .entity-item {
            padding: 8px 12px;
            margin: 4px 0;
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .entity-item:hover {
            background: #21262d;
            border-color: #58a6ff;
        }
        
        .entity-item.selected {
            background: #1f6feb;
            border-color: #58a6ff;
        }
        
        .entity-name {
            font-weight: 600;
            color: #f0f6fc;
        }
        
        .entity-path {
            font-size: 12px;
            color: #8b949e;
            margin-top: 4px;
        }
        
        #graph {
            width: 100%;
            height: 100%;
        }
        
        .node {
            cursor: pointer;
        }
        
        .node rect {
            fill: #21262d;
            stroke: #30363d;
            stroke-width: 2;
            transition: all 0.2s;
        }
        
        .node:hover rect {
            fill: #30363d;
            stroke: #58a6ff;
        }
        
        .node.selected rect {
            fill: #1f6feb;
            stroke: #58a6ff;
            stroke-width: 3;
        }
        
        .node text {
            fill: #f0f6fc;
            font-size: 14px;
            font-weight: 600;
            pointer-events: none;
        }
        
        .link {
            fill: none;
            stroke: #484f58;
            stroke-width: 2;
            marker-end: url(#arrowhead);
        }
        
        .link.import {
            stroke: #3fb950;
        }
        
        .link.export {
            stroke: #58a6ff;
        }
        
        .link.call {
            stroke: #f85149;
            stroke-dasharray: 5,5;
        }
        
        #details {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 300px;
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 16px;
            display: none;
        }
        
        #details h3 {
            margin: 0 0 12px 0;
            color: #58a6ff;
        }
        
        #details .detail-row {
            margin: 8px 0;
            font-size: 14px;
        }
        
        #details .detail-label {
            color: #8b949e;
            display: inline-block;
            width: 80px;
        }
        
        #details .detail-value {
            color: #f0f6fc;
        }
        
        .controls {
            position: absolute;
            bottom: 16px;
            left: 16px;
            display: flex;
            gap: 8px;
        }
        
        button {
            background: #21262d;
            border: 1px solid #30363d;
            color: #c9d1d9;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        button:hover {
            background: #30363d;
            border-color: #58a6ff;
        }

        #error-panel {
            position: absolute;
            bottom: 16px;
            right: 16px;
            width: 400px;
            max-height: 300px;
            background: #161b22;
            border: 1px solid #f85149;
            border-radius: 8px;
            padding: 16px;
            overflow-y: auto;
            display: none;
        }

        #error-panel h3 {
            margin: 0 0 12px 0;
            color: #f85149;
        }

        .error-item {
            margin: 8px 0;
            font-size: 13px;
            font-family: monospace;
            white-space: pre-wrap;
            color: #f85149;
        }

        .error-item .suggestion {
            color: #58a6ff;
            margin-top: 4px;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="sidebar">
            <h2 style="margin: 0 0 16px 0; color: #f0f6fc;">TypedMind Explorer</h2>
            <input type="text" id="search" placeholder="Search entities..." style="
                width: 100%;
                padding: 8px 12px;
                background: #0d1117;
                border: 1px solid #30363d;
                border-radius: 6px;
                color: #c9d1d9;
                font-size: 14px;
            ">
            <div class="entity-list" id="entityList"></div>
        </div>
        
        <div id="canvas">
            <svg id="graph"></svg>
            <div id="details"></div>
            <div id="error-panel"></div>
            <div class="controls">
                <button onclick="window.typedMindRenderer.zoomFit()">Fit View</button>
                <button onclick="window.typedMindRenderer.toggleLayout()">Toggle Layout</button>
                <button onclick="window.typedMindRenderer.clearSelection()">Clear Selection</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script>

// Generated TypedMind Renderer
(function() {
  const graphData = {"entities":[{"name":"TypedMindSystem","type":"Program","entry":"MonorepoCoordinator","version":"1.0.0","position":{"line":5,"column":1},"raw":"TypedMindSystem -> MonorepoCoordinator v1.0.0"},{"name":"MonorepoCoordinator","type":"File","path":"package.json","imports":["CLIExecutable","VSCodeExtensionPackage","StaticWebsiteAsset","TestSuiteAsset"],"exports":["WorkspaceConfig"],"position":{"line":8,"column":1},"raw":"MonorepoCoordinator @ package.json:"},{"name":"WorkspaceConfig","type":"Class","implements":[],"methods":["manageWorkspaces","buildAll","testAll"],"imports":[],"position":{"line":12,"column":1},"raw":"WorkspaceConfig <:"},{"name":"CLIExecutable","type":"Asset","description":"npx typed-mind CLI","position":{"line":16,"column":1},"raw":"CLIExecutable ~ \"npx typed-mind CLI\""},{"name":"VSCodeExtensionPackage","type":"Asset","description":"TypedMind VS Code Extension","position":{"line":19,"column":1},"raw":"VSCodeExtensionPackage ~ \"TypedMind VS Code Extension\""},{"name":"StaticWebsiteAsset","type":"Asset","description":"TypedMind Static Website","position":{"line":22,"column":1},"raw":"StaticWebsiteAsset ~ \"TypedMind Static Website\""},{"name":"TestSuiteAsset","type":"Asset","description":"TypedMind Test Suite","position":{"line":25,"column":1},"raw":"TestSuiteAsset ~ \"TypedMind Test Suite\""},{"name":"manageWorkspaces","type":"Function","signature":"() => void","calls":[],"position":{"line":29,"column":1},"raw":"manageWorkspaces :: () => void","description":"Manages pnpm workspace configuration"},{"name":"buildAll","type":"Function","signature":"() => Promise<void>","calls":[],"position":{"line":32,"column":1},"raw":"buildAll :: () => Promise<void>","description":"Builds all packages in correct dependency order"},{"name":"testAll","type":"Function","signature":"() => Promise<void>","calls":[],"position":{"line":35,"column":1},"raw":"testAll :: () => Promise<void>","description":"Runs tests across all packages"},{"name":"TypedMindCoreProgram","type":"Program","entry":"CoreParser","version":"1.0.0","position":{"line":39,"column":1},"raw":"TypedMindCoreProgram -> CoreParser v1.0.0"},{"name":"TypedMindCLIProgram","type":"Program","entry":"CLITool","version":"1.0.0","position":{"line":40,"column":1},"raw":"TypedMindCLIProgram -> CLITool v1.0.0"},{"name":"TypedMindLSPProgram","type":"Program","entry":"LanguageServer","version":"1.0.0","position":{"line":41,"column":1},"raw":"TypedMindLSPProgram -> LanguageServer v1.0.0"},{"name":"TypedMindRendererProgram","type":"Program","entry":"VisualizationRenderer","version":"1.0.0","position":{"line":42,"column":1},"raw":"TypedMindRendererProgram -> VisualizationRenderer v1.0.0"},{"name":"TypedMindVSCodeProgram","type":"Program","entry":"VSCodeExtension","version":"1.0.0","position":{"line":43,"column":1},"raw":"TypedMindVSCodeProgram -> VSCodeExtension v1.0.0"},{"name":"TestSuiteProgram","type":"Program","entry":"TestRunner","version":"1.0.0","position":{"line":44,"column":1},"raw":"TestSuiteProgram -> TestRunner v1.0.0"},{"name":"WebsiteProgram","type":"Program","entry":"WebsiteRoot","version":"1.0.0","position":{"line":47,"column":1},"raw":"WebsiteProgram -> WebsiteRoot v1.0.0"},{"name":"WebsiteRoot","type":"File","path":"lib/typed-mind-static-website/src/index.html","imports":["BrowserParser","MonacoIntegration","WebsiteAssets","PlaygroundPage"],"exports":["LandingPage"],"position":{"line":49,"column":1},"raw":"WebsiteRoot @ lib/typed-mind-static-website/src/index.html:"},{"name":"LandingPage","type":"UIComponent","purpose":"Main website landing page","root":true,"contains":["Navigation","HeroSection","SyntaxSection","PlaygroundSection","GettingStartedSection"],"containedBy":[],"affectedBy":["themeToggle"],"position":{"line":53,"column":1},"raw":"LandingPage &! \"Main website landing page\""},{"name":"Navigation","type":"UIComponent","purpose":"Site navigation","contains":[],"containedBy":["LandingPage"],"affectedBy":["navigationHandlers"],"position":{"line":56,"column":1},"raw":"Navigation & \"Site navigation\""},{"name":"HeroSection","type":"UIComponent","purpose":"Hero section","contains":[],"containedBy":["LandingPage"],"affectedBy":[],"position":{"line":59,"column":1},"raw":"HeroSection & \"Hero section\""},{"name":"SyntaxSection","type":"UIComponent","purpose":"Syntax documentation section","contains":[],"containedBy":["LandingPage"],"affectedBy":["setupSyntaxToggles"],"position":{"line":62,"column":1},"raw":"SyntaxSection & \"Syntax documentation section\""},{"name":"PlaygroundSection","type":"UIComponent","purpose":"Playground teaser section","contains":[],"containedBy":["LandingPage"],"affectedBy":["navigateToPlayground"],"position":{"line":65,"column":1},"raw":"PlaygroundSection & \"Playground teaser section\""},{"name":"GettingStartedSection","type":"UIComponent","purpose":"Getting started section","contains":[],"containedBy":["LandingPage"],"affectedBy":[],"position":{"line":68,"column":1},"raw":"GettingStartedSection & \"Getting started section\""},{"name":"PlaygroundPage","type":"File","path":"lib/typed-mind-static-website/src/playground.html","imports":["BrowserParser","MonacoIntegration","ChatService","WebsiteAssets"],"exports":["PlaygroundApp"],"position":{"line":72,"column":1},"raw":"PlaygroundPage @ lib/typed-mind-static-website/src/playground.html:"},{"name":"PlaygroundApp","type":"UIComponent","purpose":"Interactive TypedMind playground","root":true,"contains":["PlaygroundToolbar","EditorPanel","OutputPanel"],"containedBy":[],"affectedBy":["themeToggle"],"position":{"line":76,"column":1},"raw":"PlaygroundApp &! \"Interactive TypedMind playground\""},{"name":"PlaygroundToolbar","type":"UIComponent","purpose":"Top toolbar with controls","contains":["SyntaxToggle","FormatButton","ExampleSelector"],"containedBy":["PlaygroundApp"],"affectedBy":[],"position":{"line":79,"column":1},"raw":"PlaygroundToolbar & \"Top toolbar with controls\""},{"name":"SyntaxToggle","type":"UIComponent","purpose":"Syntax highlighting toggle","contains":[],"containedBy":["PlaygroundToolbar"],"affectedBy":["setupSyntaxToggles"],"position":{"line":83,"column":1},"raw":"SyntaxToggle & \"Syntax highlighting toggle\""},{"name":"FormatButton","type":"UIComponent","purpose":"Format code button","contains":[],"containedBy":["PlaygroundToolbar"],"affectedBy":[],"position":{"line":86,"column":1},"raw":"FormatButton & \"Format code button\""},{"name":"ExampleSelector","type":"UIComponent","purpose":"Example code selector","contains":[],"containedBy":["PlaygroundToolbar"],"affectedBy":[],"position":{"line":89,"column":1},"raw":"ExampleSelector & \"Example code selector\""},{"name":"EditorPanel","type":"UIComponent","purpose":"Monaco editor panel","contains":["MonacoEditor"],"containedBy":["PlaygroundApp"],"affectedBy":[],"position":{"line":92,"column":1},"raw":"EditorPanel & \"Monaco editor panel\""},{"name":"MonacoEditor","type":"UIComponent","purpose":"Monaco code editor","contains":[],"containedBy":["EditorPanel"],"affectedBy":["registerTypedMindLanguage","setupUrlSync"],"position":{"line":96,"column":1},"raw":"MonacoEditor & \"Monaco code editor\""},{"name":"OutputPanel","type":"UIComponent","purpose":"Output panel with tabs","contains":["ProblemsTab","ASTTab","VisualizationTab","ChatTab"],"containedBy":["PlaygroundApp"],"affectedBy":[],"position":{"line":99,"column":1},"raw":"OutputPanel & \"Output panel with tabs\""},{"name":"ProblemsTab","type":"UIComponent","purpose":"Validation problems tab","contains":[],"containedBy":["OutputPanel"],"affectedBy":["validateCode"],"position":{"line":103,"column":1},"raw":"ProblemsTab & \"Validation problems tab\""},{"name":"ASTTab","type":"UIComponent","purpose":"AST visualization tab","contains":[],"containedBy":["OutputPanel"],"affectedBy":[],"position":{"line":106,"column":1},"raw":"ASTTab & \"AST visualization tab\""},{"name":"VisualizationTab","type":"UIComponent","purpose":"Graph visualization tab","contains":[],"containedBy":["OutputPanel"],"affectedBy":[],"position":{"line":109,"column":1},"raw":"VisualizationTab & \"Graph visualization tab\""},{"name":"ChatTab","type":"UIComponent","purpose":"AI Assistant integration tab","contains":["ChatInterface","TokenSetup"],"containedBy":["OutputPanel"],"affectedBy":[],"position":{"line":112,"column":1},"raw":"ChatTab & \"AI Assistant integration tab\""},{"name":"ChatInterface","type":"UIComponent","purpose":"Main chat interface","contains":["MessageList","ChatInput","ClearButton"],"containedBy":["ChatTab"],"affectedBy":["sendMessage"],"position":{"line":117,"column":1},"raw":"ChatInterface & \"Main chat interface\""},{"name":"MessageList","type":"UIComponent","purpose":"Chat message history","contains":["ChatMessage"],"containedBy":["ChatInterface"],"affectedBy":["sendMessage","clearHistory","clearChatHistory"],"position":{"line":121,"column":1},"raw":"MessageList & \"Chat message history\""},{"name":"ChatMessage","type":"UIComponent","purpose":"Individual chat message","contains":[],"containedBy":["MessageList"],"affectedBy":[],"position":{"line":125,"column":1},"raw":"ChatMessage & \"Individual chat message\""},{"name":"ChatInput","type":"UIComponent","purpose":"Message input field","contains":[],"containedBy":["ChatInterface"],"affectedBy":[],"position":{"line":128,"column":1},"raw":"ChatInput & \"Message input field\""},{"name":"ClearButton","type":"UIComponent","purpose":"Clear chat history button","contains":[],"containedBy":["ChatInterface"],"affectedBy":["clearHistory"],"position":{"line":131,"column":1},"raw":"ClearButton & \"Clear chat history button\""},{"name":"TokenSetup","type":"UIComponent","purpose":"API token configuration","contains":["TokenSelector","TokenInput"],"containedBy":["ChatTab"],"affectedBy":["clearToken"],"position":{"line":134,"column":1},"raw":"TokenSetup & \"API token configuration\""},{"name":"TokenSelector","type":"UIComponent","purpose":"API provider selector","contains":[],"containedBy":["TokenSetup"],"affectedBy":["getToken"],"position":{"line":138,"column":1},"raw":"TokenSelector & \"API provider selector\""},{"name":"TokenInput","type":"UIComponent","purpose":"Token input field","contains":[],"containedBy":["TokenSetup"],"affectedBy":["storeToken"],"position":{"line":141,"column":1},"raw":"TokenInput & \"Token input field\""},{"name":"BrowserParser","type":"File","path":"lib/typed-mind-static-website/assets/js/typedmind-parser-browser.js","imports":["Monaco","Editor","ParseResult","ValidationError"],"exports":["TypedMindParser"],"position":{"line":145,"column":1},"raw":"BrowserParser @ lib/typed-mind-static-website/assets/js/typedmind-parser-browser.js:"},{"name":"MonacoIntegration","type":"File","path":"lib/typed-mind-static-website/assets/js/typedmind-monaco-simple.js","imports":["BrowserParser","LZString","Monaco","Editor","ParseResult","ValidationError"],"exports":["registerTypedMindLanguage","setupUrlSync","validateCode","setLanguageConfiguration","setMonarchTokensProvider","updateUrl","loadFromUrl","parse","displayProblems"],"position":{"line":149,"column":1},"raw":"MonacoIntegration @ lib/typed-mind-static-website/assets/js/typedmind-monaco-simple.js:"},{"name":"WebsiteAssets","type":"File","path":"lib/typed-mind-static-website/assets/","imports":["BuildScript","NetlifyConfig","VercelConfig","DeploymentConfig"],"exports":["PlaygroundExamples","MainJS","MainStyles","PlaygroundStyles"],"position":{"line":154,"column":1},"raw":"WebsiteAssets @ lib/typed-mind-static-website/assets/:"},{"name":"PlaygroundExamples","type":"File","path":"lib/typed-mind-static-website/assets/js/playground-examples-standalone.js","imports":[],"exports":["TYPEDMIND_EXAMPLES"],"position":{"line":158,"column":1},"raw":"PlaygroundExamples @ lib/typed-mind-static-website/assets/js/playground-examples-standalone.js:"},{"name":"MainJS","type":"File","path":"lib/typed-mind-static-website/assets/js/main.js","imports":["TypedMindGrammar","CLAUDE_API_KEY","OPENAI_API_KEY"],"exports":["setupSyntaxToggles","themeToggle","navigationHandlers","navigateToPlayground"],"position":{"line":161,"column":1},"raw":"MainJS @ lib/typed-mind-static-website/assets/js/main.js:"},{"name":"MainStyles","type":"File","path":"lib/typed-mind-static-website/assets/css/styles.css","imports":[],"exports":[],"position":{"line":165,"column":1},"raw":"MainStyles @ lib/typed-mind-static-website/assets/css/styles.css:"},{"name":"PlaygroundStyles","type":"File","path":"lib/typed-mind-static-website/assets/css/playground.css","imports":[],"exports":[],"position":{"line":168,"column":1},"raw":"PlaygroundStyles @ lib/typed-mind-static-website/assets/css/playground.css:"},{"name":"ChatService","type":"File","path":"lib/typed-mind-static-website/assets/js/chat-service.js","imports":["TokenManager","ChatHistory","APIAdapters","UserMessage","AssistantMessage","ChatResponse","SystemPrompt","TokenConfig","TypedMindGrammar"],"exports":["sendMessage","formatPrompt","validateToken","callAPI","saveToHistory","clearHistory"],"position":{"line":172,"column":1},"raw":"ChatService @ lib/typed-mind-static-website/assets/js/chat-service.js:"},{"name":"TokenManager","type":"File","path":"lib/typed-mind-static-website/assets/js/token-manager.js","imports":["CryptoUtils","TokenConfig"],"exports":["storeToken","getToken","clearToken"],"position":{"line":176,"column":1},"raw":"TokenManager @ lib/typed-mind-static-website/assets/js/token-manager.js:"},{"name":"ChatHistory","type":"File","path":"lib/typed-mind-static-website/assets/js/chat-history.js","imports":["UserMessage","AssistantMessage"],"exports":["saveMessage","loadHistory","clearChatHistory"],"position":{"line":180,"column":1},"raw":"ChatHistory @ lib/typed-mind-static-website/assets/js/chat-history.js:"},{"name":"APIAdapters","type":"File","path":"lib/typed-mind-static-website/assets/js/api-adapters.js","imports":[],"exports":["ChatGPTAdapter","ClaudeAdapter","BaseAPIAdapter"],"position":{"line":184,"column":1},"raw":"APIAdapters @ lib/typed-mind-static-website/assets/js/api-adapters.js:"},{"name":"BaseAPIAdapter","type":"Class","implements":[],"methods":["sendRequest"],"imports":[],"position":{"line":187,"column":1},"raw":"BaseAPIAdapter <:"},{"name":"ChatGPTAdapter","type":"Class","extends":"BaseAPIAdapter","implements":[],"methods":["sendRequest"],"imports":[],"position":{"line":190,"column":1},"raw":"ChatGPTAdapter <: BaseAPIAdapter"},{"name":"ClaudeAdapter","type":"Class","extends":"BaseAPIAdapter","implements":[],"methods":["sendRequest"],"imports":[],"position":{"line":193,"column":1},"raw":"ClaudeAdapter <: BaseAPIAdapter"},{"name":"CryptoUtils","type":"File","path":"lib/typed-mind-static-website/assets/js/crypto-utils.js","imports":[],"exports":["encrypt","decrypt"],"position":{"line":196,"column":1},"raw":"CryptoUtils @ lib/typed-mind-static-website/assets/js/crypto-utils.js:"},{"name":"BuildScript","type":"File","path":"lib/typed-mind-static-website/build.js","imports":[],"exports":["copyFiles","minifyAssets"],"position":{"line":200,"column":1},"raw":"BuildScript @ lib/typed-mind-static-website/build.js:"},{"name":"NetlifyConfig","type":"Constants","path":"lib/typed-mind-static-website/netlify.toml","schema":"DeploymentConfig","position":{"line":203,"column":1},"raw":"NetlifyConfig ! lib/typed-mind-static-website/netlify.toml : DeploymentConfig"},{"name":"VercelConfig","type":"Constants","path":"lib/typed-mind-static-website/vercel.json","schema":"DeploymentConfig","position":{"line":204,"column":1},"raw":"VercelConfig ! lib/typed-mind-static-website/vercel.json : DeploymentConfig"},{"name":"registerTypedMindLanguage","type":"Function","signature":"(monaco: Monaco) => void","calls":["setLanguageConfiguration","setMonarchTokensProvider"],"position":{"line":207,"column":1},"raw":"registerTypedMindLanguage :: (monaco: Monaco) => void","description":"Registers TypedMind language with Monaco editor","affects":["MonacoEditor"]},{"name":"setupUrlSync","type":"Function","signature":"() => void","calls":["updateUrl","loadFromUrl"],"position":{"line":213,"column":1},"raw":"setupUrlSync :: () => void","description":"Synchronizes editor content with URL for sharing","affects":["MonacoEditor"]},{"name":"validateCode","type":"Function","signature":"(editor: Editor) => void","calls":["parse","displayProblems"],"position":{"line":218,"column":1},"raw":"validateCode :: (editor: Editor) => void","description":"Validates TypedMind code in real-time","affects":["ProblemsTab"]},{"name":"navigateToPlayground","type":"Function","signature":"() => void","calls":[],"position":{"line":224,"column":1},"raw":"navigateToPlayground :: () => void","description":"Navigates from landing page to playground","affects":["PlaygroundSection"]},{"name":"setupSyntaxToggles","type":"Function","signature":"() => void","calls":[],"position":{"line":228,"column":1},"raw":"setupSyntaxToggles :: () => void","description":"Sets up syntax highlighting toggles","affects":["SyntaxSection","SyntaxToggle"]},{"name":"themeToggle","type":"Function","signature":"() => void","calls":[],"position":{"line":232,"column":1},"raw":"themeToggle :: () => void","description":"Handles theme switching","affects":["LandingPage","PlaygroundApp"]},{"name":"navigationHandlers","type":"Function","signature":"() => void","calls":[],"position":{"line":236,"column":1},"raw":"navigationHandlers :: () => void","description":"Sets up navigation event handlers","affects":["Navigation"]},{"name":"copyFiles","type":"Function","signature":"() => void","calls":[],"position":{"line":240,"column":1},"raw":"copyFiles :: () => void","description":"Copies files during build process"},{"name":"minifyAssets","type":"Function","signature":"() => void","calls":[],"position":{"line":243,"column":1},"raw":"minifyAssets :: () => void","description":"Minifies CSS and JS assets"},{"name":"setLanguageConfiguration","type":"Function","signature":"(monaco: Monaco) => void","calls":[],"position":{"line":246,"column":1},"raw":"setLanguageConfiguration :: (monaco: Monaco) => void","description":"Sets Monaco language configuration"},{"name":"setMonarchTokensProvider","type":"Function","signature":"(monaco: Monaco) => void","calls":[],"position":{"line":249,"column":1},"raw":"setMonarchTokensProvider :: (monaco: Monaco) => void","description":"Sets Monaco syntax highlighting"},{"name":"updateUrl","type":"Function","signature":"(content: string) => void","calls":[],"position":{"line":252,"column":1},"raw":"updateUrl :: (content: string) => void","description":"Updates URL with editor content"},{"name":"loadFromUrl","type":"Function","signature":"() => string","calls":[],"position":{"line":255,"column":1},"raw":"loadFromUrl :: () => string","description":"Loads content from URL parameters"},{"name":"parse","type":"Function","signature":"(code: string) => ParseResult","calls":[],"position":{"line":258,"column":1},"raw":"parse :: (code: string) => ParseResult","description":"Parses TypedMind code"},{"name":"displayProblems","type":"Function","signature":"(problems: ValidationError[]) => void","calls":[],"position":{"line":263,"column":1},"raw":"displayProblems :: (problems: ValidationError[]) => void","description":"Displays validation problems"},{"name":"sendMessage","type":"Function","signature":"(message: string, apiType: string) => Promise<ChatResponse>","calls":["validateToken","formatPrompt","callAPI","saveToHistory"],"position":{"line":268,"column":1},"raw":"sendMessage :: (message: string, apiType: string) => Promise<ChatResponse>","description":"Sends message to selected AI API","affects":["ChatInterface","MessageList"]},{"name":"storeToken","type":"Function","signature":"(token: string, apiType: string) => void","calls":["encrypt"],"position":{"line":275,"column":1},"raw":"storeToken :: (token: string, apiType: string) => void","description":"Securely stores API token","affects":["TokenInput"]},{"name":"getToken","type":"Function","signature":"(apiType: string) => string","calls":["decrypt"],"position":{"line":281,"column":1},"raw":"getToken :: (apiType: string) => string","description":"Retrieves stored API token","affects":["TokenSelector"]},{"name":"clearToken","type":"Function","signature":"(apiType: string) => void","calls":[],"position":{"line":286,"column":1},"raw":"clearToken :: (apiType: string) => void","description":"Clears stored API token","affects":["TokenSetup"]},{"name":"clearHistory","type":"Function","signature":"() => void","calls":[],"position":{"line":290,"column":1},"raw":"clearHistory :: () => void","description":"Clears all chat history","affects":["ClearButton","MessageList"]},{"name":"clearChatHistory","type":"Function","signature":"() => void","calls":[],"position":{"line":294,"column":1},"raw":"clearChatHistory :: () => void","description":"Clears chat history from storage","affects":["MessageList"]},{"name":"saveMessage","type":"Function","signature":"(message: UserMessage | AssistantMessage) => void","calls":[],"position":{"line":298,"column":1},"raw":"saveMessage :: (message: UserMessage | AssistantMessage) => void","description":"Saves message to history"},{"name":"loadHistory","type":"Function","signature":"() => (UserMessage | AssistantMessage)[]","calls":[],"position":{"line":301,"column":1},"raw":"loadHistory :: () => (UserMessage | AssistantMessage)[]","description":"Loads chat history"},{"name":"formatPrompt","type":"Function","signature":"(userMessage: string) => SystemPrompt","calls":[],"position":{"line":304,"column":1},"raw":"formatPrompt :: (userMessage: string) => SystemPrompt","description":"Formats message with TypedMind grammar context"},{"name":"validateToken","type":"Function","signature":"(token: string) => boolean","calls":[],"position":{"line":309,"column":1},"raw":"validateToken :: (token: string) => boolean","description":"Validates API token format"},{"name":"callAPI","type":"Function","signature":"(prompt: SystemPrompt, apiType: string) => Promise<string>","calls":[],"position":{"line":312,"column":1},"raw":"callAPI :: (prompt: SystemPrompt, apiType: string) => Promise<string>","description":"Calls the selected AI API"},{"name":"saveToHistory","type":"Function","signature":"(userMsg: UserMessage, assistantMsg: AssistantMessage) => void","calls":[],"position":{"line":316,"column":1},"raw":"saveToHistory :: (userMsg: UserMessage, assistantMsg: AssistantMessage) => void","description":"Saves conversation to history"},{"name":"encrypt","type":"Function","signature":"(data: string) => string","calls":[],"position":{"line":320,"column":1},"raw":"encrypt :: (data: string) => string","description":"Encrypts sensitive data"},{"name":"decrypt","type":"Function","signature":"(encryptedData: string) => string","calls":[],"position":{"line":323,"column":1},"raw":"decrypt :: (encryptedData: string) => string","description":"Decrypts sensitive data"},{"name":"sendRequest","type":"Function","signature":"(prompt: SystemPrompt) => Promise<string>","calls":[],"position":{"line":326,"column":1},"raw":"sendRequest :: (prompt: SystemPrompt) => Promise<string>","description":"Base API request method"},{"name":"TypedMindParser","type":"DTO","purpose":"Browser-compatible parser","fields":[{"name":"parse","type":"Function","description":"Parse function","optional":false},{"name":"validate","type":"Function","description":"Validation function","optional":false}],"position":{"line":330,"column":1},"raw":"TypedMindParser % \"Browser-compatible parser\""},{"name":"ParseResult","type":"DTO","purpose":"Parse operation result","fields":[{"name":"valid","type":"boolean","description":"Is valid","optional":false},{"name":"errors","type":"ValidationError[]","description":"Validation errors","optional":false},{"name":"ast","type":"object","description":"Abstract syntax tree","optional":true}],"position":{"line":334,"column":1},"raw":"ParseResult % \"Parse operation result\""},{"name":"ValidationError","type":"DTO","purpose":"Validation error details","fields":[{"name":"line","type":"number","description":"Line number","optional":false},{"name":"column","type":"number","description":"Column number","optional":false},{"name":"message","type":"string","description":"Error message","optional":false}],"position":{"line":339,"column":1},"raw":"ValidationError % \"Validation error details\""},{"name":"Monaco","type":"DTO","purpose":"Monaco editor instance","fields":[{"name":"editor","type":"object","description":"Editor instance","optional":false},{"name":"languages","type":"object","description":"Languages API","optional":false}],"position":{"line":344,"column":1},"raw":"Monaco % \"Monaco editor instance\""},{"name":"Editor","type":"DTO","purpose":"Monaco editor interface","fields":[{"name":"getValue","type":"Function","description":"Get editor content","optional":false},{"name":"setValue","type":"Function","description":"Set editor content","optional":false}],"position":{"line":348,"column":1},"raw":"Editor % \"Monaco editor interface\""},{"name":"TYPEDMIND_EXAMPLES","type":"DTO","purpose":"Playground code examples","fields":[{"name":"examples","type":"object[]","description":"Array of example objects","optional":false}],"position":{"line":352,"column":1},"raw":"TYPEDMIND_EXAMPLES % \"Playground code examples\""},{"name":"UserMessage","type":"DTO","purpose":"User chat message","fields":[{"name":"content","type":"string","description":"Message content","optional":false},{"name":"timestamp","type":"Date","description":"Message timestamp","optional":false}],"position":{"line":355,"column":1},"raw":"UserMessage % \"User chat message\""},{"name":"AssistantMessage","type":"DTO","purpose":"AI assistant response","fields":[{"name":"content","type":"string","description":"Response content","optional":false},{"name":"timestamp","type":"Date","description":"Response timestamp","optional":false},{"name":"code","type":"string","description":"Generated TypedMind code","optional":true}],"position":{"line":359,"column":1},"raw":"AssistantMessage % \"AI assistant response\""},{"name":"ChatResponse","type":"DTO","purpose":"API response wrapper","fields":[{"name":"success","type":"boolean","description":"Request success","optional":false},{"name":"message","type":"AssistantMessage","description":"Response message","optional":true},{"name":"error","type":"string","description":"Error message","optional":true}],"position":{"line":364,"column":1},"raw":"ChatResponse % \"API response wrapper\""},{"name":"SystemPrompt","type":"DTO","purpose":"System prompt with grammar","fields":[{"name":"system","type":"string","description":"System instructions","optional":false},{"name":"grammar","type":"string","description":"TypedMind grammar reference","optional":false},{"name":"userMessage","type":"string","description":"User's request","optional":false}],"position":{"line":369,"column":1},"raw":"SystemPrompt % \"System prompt with grammar\""},{"name":"TokenConfig","type":"DTO","purpose":"API token configuration","fields":[{"name":"apiType","type":"string","description":"chatgpt | claude","optional":false},{"name":"token","type":"string","description":"Encrypted API token","optional":false}],"position":{"line":374,"column":1},"raw":"TokenConfig % \"API token configuration\""},{"name":"TypedMindGrammar","type":"DTO","purpose":"TypedMind language grammar","fields":[{"name":"rules","type":"string","description":"Grammar rules","optional":false},{"name":"examples","type":"string","description":"Usage examples","optional":false}],"position":{"line":378,"column":1},"raw":"TypedMindGrammar % \"TypedMind language grammar\""},{"name":"DeploymentConfig","type":"DTO","purpose":"Deployment configuration","fields":[{"name":"build","type":"object","description":"Build settings","optional":false},{"name":"redirects","type":"array","description":"URL redirects","optional":false}],"position":{"line":382,"column":1},"raw":"DeploymentConfig % \"Deployment configuration\""},{"name":"CLAUDE_API_KEY","type":"RunParameter","paramType":"browser","description":"Claude API key for chatbot","consumedBy":[],"position":{"line":387,"column":1},"raw":"CLAUDE_API_KEY $browser \"Claude API key for chatbot\" (optional)"},{"name":"OPENAI_API_KEY","type":"RunParameter","paramType":"browser","description":"OpenAI API key for chatbot","consumedBy":[],"position":{"line":388,"column":1},"raw":"OPENAI_API_KEY $browser \"OpenAI API key for chatbot\" (optional)"},{"name":"LZString","type":"Dependency","purpose":"String compression library","version":"1.4.4","importedBy":[],"position":{"line":391,"column":1},"raw":"LZString ^ \"String compression library\" v1.4.4"}],"links":[{"source":"TypedMindSystem","target":"MonorepoCoordinator","type":"export"},{"source":"MonorepoCoordinator","target":"CLIExecutable","type":"import"},{"source":"MonorepoCoordinator","target":"VSCodeExtensionPackage","type":"import"},{"source":"MonorepoCoordinator","target":"StaticWebsiteAsset","type":"import"},{"source":"MonorepoCoordinator","target":"TestSuiteAsset","type":"import"},{"source":"WebsiteProgram","target":"WebsiteRoot","type":"export"},{"source":"WebsiteRoot","target":"BrowserParser","type":"import"},{"source":"WebsiteRoot","target":"MonacoIntegration","type":"import"},{"source":"WebsiteRoot","target":"WebsiteAssets","type":"import"},{"source":"WebsiteRoot","target":"PlaygroundPage","type":"import"},{"source":"PlaygroundPage","target":"BrowserParser","type":"import"},{"source":"PlaygroundPage","target":"MonacoIntegration","type":"import"},{"source":"PlaygroundPage","target":"ChatService","type":"import"},{"source":"PlaygroundPage","target":"WebsiteAssets","type":"import"},{"source":"BrowserParser","target":"Monaco","type":"import"},{"source":"BrowserParser","target":"Editor","type":"import"},{"source":"BrowserParser","target":"ParseResult","type":"import"},{"source":"BrowserParser","target":"ValidationError","type":"import"},{"source":"MonacoIntegration","target":"BrowserParser","type":"import"},{"source":"MonacoIntegration","target":"LZString","type":"import"},{"source":"MonacoIntegration","target":"Monaco","type":"import"},{"source":"MonacoIntegration","target":"Editor","type":"import"},{"source":"MonacoIntegration","target":"ParseResult","type":"import"},{"source":"MonacoIntegration","target":"ValidationError","type":"import"},{"source":"WebsiteAssets","target":"BuildScript","type":"import"},{"source":"WebsiteAssets","target":"NetlifyConfig","type":"import"},{"source":"WebsiteAssets","target":"VercelConfig","type":"import"},{"source":"WebsiteAssets","target":"DeploymentConfig","type":"import"},{"source":"MainJS","target":"TypedMindGrammar","type":"import"},{"source":"MainJS","target":"CLAUDE_API_KEY","type":"import"},{"source":"MainJS","target":"OPENAI_API_KEY","type":"import"},{"source":"ChatService","target":"TokenManager","type":"import"},{"source":"ChatService","target":"ChatHistory","type":"import"},{"source":"ChatService","target":"APIAdapters","type":"import"},{"source":"ChatService","target":"UserMessage","type":"import"},{"source":"ChatService","target":"AssistantMessage","type":"import"},{"source":"ChatService","target":"ChatResponse","type":"import"},{"source":"ChatService","target":"SystemPrompt","type":"import"},{"source":"ChatService","target":"TokenConfig","type":"import"},{"source":"ChatService","target":"TypedMindGrammar","type":"import"},{"source":"TokenManager","target":"CryptoUtils","type":"import"},{"source":"TokenManager","target":"TokenConfig","type":"import"},{"source":"ChatHistory","target":"UserMessage","type":"import"},{"source":"ChatHistory","target":"AssistantMessage","type":"import"},{"source":"registerTypedMindLanguage","target":"setLanguageConfiguration","type":"call"},{"source":"registerTypedMindLanguage","target":"setMonarchTokensProvider","type":"call"},{"source":"setupUrlSync","target":"updateUrl","type":"call"},{"source":"setupUrlSync","target":"loadFromUrl","type":"call"},{"source":"validateCode","target":"parse","type":"call"},{"source":"validateCode","target":"displayProblems","type":"call"},{"source":"sendMessage","target":"validateToken","type":"call"},{"source":"sendMessage","target":"formatPrompt","type":"call"},{"source":"sendMessage","target":"callAPI","type":"call"},{"source":"sendMessage","target":"saveToHistory","type":"call"},{"source":"storeToken","target":"encrypt","type":"call"},{"source":"getToken","target":"decrypt","type":"call"}],"errors":[]};

  class TypedMindInteractiveRenderer {
    constructor(data) {
      this.data = data;
      this.selectedNode = null;
      this.layoutType = 'force';
      this.init();
    }

    init() {
      this.renderSidebar();
      this.renderGraph();
      this.setupSearch();
      this.renderErrors();
    }

    renderSidebar() {
      const groups = {};
      this.data.entities.forEach(entity => {
        if (!groups[entity.type]) groups[entity.type] = [];
        groups[entity.type].push(entity);
      });

      const listEl = document.getElementById('entityList');
      listEl.innerHTML = '';

      Object.entries(groups).forEach(([type, entities]) => {
        const groupEl = document.createElement('div');
        groupEl.className = 'entity-group';
        
        const titleEl = document.createElement('h3');
        titleEl.textContent = type + 's';
        groupEl.appendChild(titleEl);

        entities.forEach(entity => {
          const itemEl = document.createElement('div');
          itemEl.className = 'entity-item';
          itemEl.dataset.name = entity.name;
          
          const nameEl = document.createElement('div');
          nameEl.className = 'entity-name';
          nameEl.textContent = entity.name;
          itemEl.appendChild(nameEl);

          if (entity.path) {
            const pathEl = document.createElement('div');
            pathEl.className = 'entity-path';
            pathEl.textContent = entity.path;
            itemEl.appendChild(pathEl);
          }

          itemEl.onclick = () => this.selectNode(entity.name);
          groupEl.appendChild(itemEl);
        });

        listEl.appendChild(groupEl);
      });
    }

    renderGraph() {
      const width = window.innerWidth - 300;
      const height = window.innerHeight;

      const svg = d3.select('#graph')
        .attr('width', width)
        .attr('height', height);

      svg.selectAll('*').remove();

      // Create arrow marker
      svg.append('defs').append('marker')
        .attr('id', 'arrowhead')
        .attr('viewBox', '0 -5 10 10')
        .attr('refX', 30)
        .attr('refY', 0)
        .attr('markerWidth', 6)
        .attr('markerHeight', 6)
        .attr('orient', 'auto')
        .append('path')
        .attr('d', 'M0,-5L10,0L0,5')
        .attr('fill', '#484f58');

      // Create nodes and links
      const nodes = this.data.entities.map(e => ({
        id: e.name,
        ...e
      }));

      const links = this.data.links;

      // Create force simulation
      const simulation = d3.forceSimulation(nodes)
        .force('link', d3.forceLink(links).id(d => d.id).distance(150))
        .force('charge', d3.forceManyBody().strength(-1000))
        .force('center', d3.forceCenter(width / 2, height / 2));

      const g = svg.append('g');

      const link = g.append('g')
        .selectAll('line')
        .data(links)
        .enter().append('line')
        .attr('class', d => `link ${d.type}`);

      const node = g.append('g')
        .selectAll('.node')
        .data(nodes)
        .enter().append('g')
        .attr('class', 'node')
        .call(d3.drag()
          .on('start', dragstarted)
          .on('drag', dragged)
          .on('end', dragended));

      node.append('rect')
        .attr('width', 120)
        .attr('height', 40)
        .attr('x', -60)
        .attr('y', -20)
        .attr('rx', 6);

      node.append('text')
        .text(d => d.id)
        .attr('text-anchor', 'middle')
        .attr('dy', '.35em');

      node.on('click', (event, d) => {
        this.selectNode(d.id);
      });

      simulation.on('tick', () => {
        link
          .attr('x1', d => d.source.x)
          .attr('y1', d => d.source.y)
          .attr('x2', d => d.target.x)
          .attr('y2', d => d.target.y);

        node.attr('transform', d => `translate(${d.x},${d.y})`);
      });

      // Zoom behavior
      const zoom = d3.zoom()
        .scaleExtent([0.1, 4])
        .on('zoom', (event) => {
          g.attr('transform', event.transform);
        });

      svg.call(zoom);

      this.svg = svg;
      this.g = g;
      this.zoom = zoom;
      this.simulation = simulation;

      function dragstarted(event, d) {
        if (!event.active) simulation.alphaTarget(0.3).restart();
        d.fx = d.x;
        d.fy = d.y;
      }

      function dragged(event, d) {
        d.fx = event.x;
        d.fy = event.y;
      }

      function dragended(event, d) {
        if (!event.active) simulation.alphaTarget(0);
        d.fx = null;
        d.fy = null;
      }
    }

    selectNode(name) {
      this.selectedNode = name;
      
      // Update sidebar
      document.querySelectorAll('.entity-item').forEach(el => {
        el.classList.toggle('selected', el.dataset.name === name);
      });

      // Update graph
      d3.selectAll('.node').classed('selected', d => d.id === name);

      // Show details
      const entity = this.data.entities.find(e => e.name === name);
      if (entity) {
        this.showDetails(entity);
      }
    }

    showDetails(entity) {
      const detailsEl = document.getElementById('details');
      detailsEl.style.display = 'block';
      
      let html = `<h3>${entity.name}</h3>`;
      html += `<div class="detail-row"><span class="detail-label">Type:</span><span class="detail-value">${entity.type}</span></div>`;
      
      if (entity.path) {
        html += `<div class="detail-row"><span class="detail-label">Path:</span><span class="detail-value">${entity.path}</span></div>`;
      }
      
      if (entity.imports && entity.imports.length > 0) {
        html += `<div class="detail-row"><span class="detail-label">Imports:</span><span class="detail-value">${entity.imports.join(', ')}</span></div>`;
      }
      
      if (entity.exports && entity.exports.length > 0) {
        html += `<div class="detail-row"><span class="detail-label">Exports:</span><span class="detail-value">${entity.exports.join(', ')}</span></div>`;
      }

      if (entity.signature) {
        html += `<div class="detail-row"><span class="detail-label">Signature:</span><span class="detail-value">${entity.signature}</span></div>`;
      }

      if (entity.description) {
        html += `<div class="detail-row"><span class="detail-label">Description:</span><span class="detail-value">${entity.description}</span></div>`;
      }

      if (entity.calls && entity.calls.length > 0) {
        html += `<div class="detail-row"><span class="detail-label">Calls:</span><span class="detail-value">${entity.calls.join(', ')}</span></div>`;
      }

      if (entity.methods && entity.methods.length > 0) {
        html += `<div class="detail-row"><span class="detail-label">Methods:</span><span class="detail-value">${entity.methods.join(', ')}</span></div>`;
      }
      
      detailsEl.innerHTML = html;
    }

    setupSearch() {
      const searchEl = document.getElementById('search');
      searchEl.addEventListener('input', (e) => {
        const query = e.target.value.toLowerCase();
        document.querySelectorAll('.entity-item').forEach(el => {
          const matches = el.textContent.toLowerCase().includes(query);
          el.style.display = matches ? 'block' : 'none';
        });
      });
    }

    renderErrors() {
      if (!this.data.errors || this.data.errors.length === 0) return;

      const errorPanel = document.getElementById('error-panel');
      errorPanel.style.display = 'block';
      
      let html = '<h3>Validation Errors</h3>';
      this.data.errors.forEach(error => {
        html += '<div class="error-item">';
        html += `${error.severity.toUpperCase()} at line ${error.position.line}, col ${error.position.column}: ${error.message}`;
        if (error.suggestion) {
          html += `<div class="suggestion">Suggestion: ${error.suggestion}</div>`;
        }
        html += '</div>';
      });
      
      errorPanel.innerHTML = html;
    }

    zoomFit() {
      const bounds = this.g.node().getBBox();
      const fullWidth = this.svg.node().clientWidth;
      const fullHeight = this.svg.node().clientHeight;
      const width = bounds.width;
      const height = bounds.height;
      const midX = bounds.x + width / 2;
      const midY = bounds.y + height / 2;
      const scale = 0.8 / Math.max(width / fullWidth, height / fullHeight);
      const translate = [fullWidth / 2 - scale * midX, fullHeight / 2 - scale * midY];

      this.svg.transition().duration(750).call(
        this.zoom.transform,
        d3.zoomIdentity.translate(translate[0], translate[1]).scale(scale)
      );
    }

    toggleLayout() {
      alert('Layout toggle between force-directed and hierarchical views coming soon!');
    }

    clearSelection() {
      this.selectedNode = null;
      document.querySelectorAll('.entity-item').forEach(el => {
        el.classList.remove('selected');
      });
      d3.selectAll('.node').classed('selected', false);
      document.getElementById('details').style.display = 'none';
    }
  }

  // Initialize renderer
  window.typedMindRenderer = new TypedMindInteractiveRenderer(graphData);
})();

</script>
</body>
</html>